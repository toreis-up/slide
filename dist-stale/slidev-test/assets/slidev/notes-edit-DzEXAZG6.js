import{d as k,r as m,a3 as w,f as N,e as p,g as s,w as c,T as _,a4 as $,F as V,o as y,U as a}from"../modules/vue-D2mFVvPg.js";import{k as T,l as C}from"../index-CgMcaTYj.js";import{u as H}from"./useSlideInfo-BdFSV1x7.js";import{s as z}from"../monaco/bundled-types-B_8rZ8L8.js";import{_ as B}from"./IconButton.vue_vue_type_script_setup_true_lang-BPtb3vP9.js";import{_ as E}from"./Modal.vue_vue_type_script_setup_true_lang-B3l4EINe.js";import"../modules/shiki-BMWbSnyb.js";import"../modules/file-saver-C8QSpN-3.js";const U={class:"flex my-1"},D={class:"h-full"},F={class:"slidev-glass-effect fixed bottom-5 right-5 rounded-full border border-main"},J=k({__name:"notes-edit",setup(I){T({title:`Notes Edit - ${z}`});const{slides:i}=C(),l=m(!1),n=m(v(i.value));function v(o){const e=[];for(const t of o)t.meta.slide.note?.trim()&&(e.push(`--- #${t.no}`),e.push(""),e.push(t.meta.slide.note),e.push(""));return e.join(`
`)}function h(o,e){const t=o.split(/^(---\s*#\d+\s*)$/gm);t.forEach((x,b)=>{const r=x.match(/^---\s*#(\d+)\s*$/);if(r){const d=Number.parseInt(r[1]),u=t[b+1].trim(),f=e.find(g=>g.no===d);f&&(f.meta.slide.note=u,H(d).update({note:u}))}})}return w(n,o=>{h(o,i.value)},{debounce:300}),(o,e)=>(y(),N(V,null,[p(E,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),class:"px-6 py-4 flex flex-col gap-2"},{default:c(()=>[e[4]||(e[4]=s("div",{class:"flex gap-2 text-xl"},[s("div",{class:"i-carbon:information my-auto"}),a(" Help ")],-1)),e[5]||(e[5]=s("div",{class:"prose dark:prose-invert"},[s("p",null,"This is the batch notes editor. You can edit the notes for all the slides at once here."),s("p",null,[a("The note for each slide are separated by "),s("code",null,"--- #[no]"),a(" lines, you might want to keep them while editing.")])],-1)),s("div",U,[s("button",{class:"slidev-form-button",onClick:e[0]||(e[0]=t=>l.value=!1)}," Close ")])]),_:1},8,["modelValue"]),s("div",D,[s("div",F,[p(B,{title:"Help",class:"rounded-full",onClick:e[2]||(e[2]=t=>l.value=!0)},{default:c(()=>[...e[6]||(e[6]=[s("div",{class:"i-carbon:help text-2xl"},null,-1)])]),_:1})]),_(s("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>n.value=t),class:"prose dark:prose-invert resize-none p5 outline-none bg-transparent block h-full w-full! max-w-full! max-h-full! min-h-full! min-w-full!"},null,512),[[$,n.value]])])],64))}});export{J as default};
